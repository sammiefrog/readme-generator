{"version":3,"sources":["ng://primeng/toast/toast.ts"],"names":["ToastItem","this","onClose","EventEmitter","prototype","ngAfterViewInit","initTimeout","_this","message","sticky","timeout","setTimeout","emit","index","life","clearTimeout","onMouseEnter","onMouseLeave","onCloseIconClick","event","preventDefault","ngOnDestroy","__decorate","Input","Output","ViewChild","Component","selector","template","animations","trigger","state","style","transform","opacity","transition","animate","height","Toast","messageService","autoZIndex","baseZIndex","position","preventOpenDuplicates","preventDuplicates","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","ngOnInit","messageSubscription","messageObserver","subscribe","messages","Array","filteredMessages","filter","m","canAdd","add","modal","length","enableModality","clearSubscription","clearObserver","key","disableModality","__spread","messagesArchieve","allow","containsMessage","collection","find","summary","detail","severity","ngAfterContentInit","templates","forEach","item","getType","onMessageClose","splice","mask","document","createElement","zIndex","String","parseInt","containerViewChild","nativeElement","DomHandler","addMultipleClasses","body","appendChild","removeChild","onAnimationStart","fromState","zindex","unsubscribe","MessageService","ContentChildren","PrimeTemplate","query","animateChild","changeDetection","ChangeDetectionStrategy","Default","ToastModule","NgModule","imports","CommonModule","exports","SharedModule","declarations"],"mappings":"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","sourcesContent":["import {NgModule,Component,Input,Output,OnInit,AfterViewInit,AfterContentInit,OnDestroy,ElementRef,ViewChild,EventEmitter,ContentChildren,QueryList,TemplateRef,ChangeDetectionStrategy} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {Message} from 'primeng/api';\nimport {DomHandler} from 'primeng/dom';\nimport {PrimeTemplate,SharedModule} from 'primeng/api';\nimport {MessageService} from 'primeng/api';\nimport {Subscription} from 'rxjs';\nimport {trigger,state,style,transition,animate,query,animateChild,AnimationEvent} from '@angular/animations';\n\n@Component({\n    selector: 'p-toastItem',\n    template: `\n        <div #container [attr.id]=\"message.id\" class=\"ui-toast-message ui-shadow\" [@messageState]=\"{value: 'visible', params: {showTransformParams: showTransformOptions, hideTransformParams: hideTransformOptions, showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions}}\"\n            [ngClass]=\"{'ui-toast-message-info': message.severity == 'info','ui-toast-message-warn': message.severity == 'warn',\n                'ui-toast-message-error': message.severity == 'error','ui-toast-message-success': message.severity == 'success'}\"\n                (mouseenter)=\"onMouseEnter()\" (mouseleave)=\"onMouseLeave()\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n            <div class=\"ui-toast-message-content\">\n                <a tabindex=\"0\" class=\"ui-toast-close-icon pi pi-times\" (click)=\"onCloseIconClick($event)\" (keydown.enter)=\"onCloseIconClick($event)\" *ngIf=\"message.closable !== false\"></a>\n                <ng-container *ngIf=\"!template\">\n                    <span class=\"ui-toast-icon pi\"\n                        [ngClass]=\"{'pi-info-circle': message.severity == 'info', 'pi-exclamation-triangle': message.severity == 'warn',\n                            'pi-times-circle': message.severity == 'error', 'pi-check' :message.severity == 'success'}\"></span>\n                    <div class=\"ui-toast-message-text-content\">\n                        <div class=\"ui-toast-summary\">{{message.summary}}</div>\n                        <div class=\"ui-toast-detail\">{{message.detail}}</div>\n                    </div>\n                </ng-container>\n                <ng-container *ngTemplateOutlet=\"template; context: {$implicit: message}\"></ng-container>\n            </div>\n        </div>\n    `,\n    animations: [\n        trigger('messageState', [\n            state('visible', style({\n                transform: 'translateY(0)',\n                opacity: 1\n            })),\n            transition('void => *', [\n                style({transform: '{{showTransformParams}}', opacity: 0}),\n                animate('{{showTransitionParams}}')\n            ]),\n            transition('* => void', [\n                animate(('{{hideTransitionParams}}'), style({\n                    height: 0,\n                    opacity: 0,\n                    transform: '{{hideTransformParams}}'\n                }))\n            ])\n        ])\n    ]\n})\nexport class ToastItem implements AfterViewInit, OnDestroy {\n\n    @Input() message: Message;\n\n    @Input() index: number;\n\n    @Input() template: TemplateRef<any>;\n\n    @Input() showTransformOptions: string;\n\n    @Input() hideTransformOptions: string;\n\n    @Input() showTransitionOptions: string;\n\n    @Input() hideTransitionOptions: string;\n\n    @Output() onClose: EventEmitter<any> = new EventEmitter();\n\n    @ViewChild('container') containerViewChild: ElementRef;\n\n    timeout: any;\n\n    ngAfterViewInit() {\n        this.initTimeout();\n    }\n\n    initTimeout() {\n        if (!this.message.sticky) {\n            this.timeout = setTimeout(() => {\n                this.onClose.emit({\n                    index: this.index,\n                    message: this.message\n                });\n            }, this.message.life || 3000);\n        }\n    }\n\n    clearTimeout() {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n    }\n    \n    onMouseEnter() {\n        this.clearTimeout();\n    }\n\n    onMouseLeave() {\n        this.initTimeout();\n    }\n \n    onCloseIconClick(event) {\n        this.clearTimeout();\n        \n        this.onClose.emit({\n            index: this.index,\n            message: this.message\n        });\n\n        event.preventDefault();\n    }\n\n    ngOnDestroy() {\n        this.clearTimeout();\n    }\n}\n\n@Component({\n    selector: 'p-toast',\n    template: `\n        <div #container [ngClass]=\"{'ui-toast ui-widget': true, \n                'ui-toast-top-right': position === 'top-right',\n                'ui-toast-top-left': position === 'top-left',\n                'ui-toast-bottom-right': position === 'bottom-right',\n                'ui-toast-bottom-left': position === 'bottom-left',\n                'ui-toast-top-center': position === 'top-center',\n                'ui-toast-bottom-center': position === 'bottom-center',\n                'ui-toast-center': position === 'center'}\" \n                [ngStyle]=\"style\" [class]=\"styleClass\">\n            <p-toastItem *ngFor=\"let msg of messages; let i=index\" [message]=\"msg\" [index]=\"i\" (onClose)=\"onMessageClose($event)\"\n                    [template]=\"template\" @toastAnimation (@toastAnimation.start)=\"onAnimationStart($event)\" \n                    [showTransformOptions]=\"showTransformOptions\" [hideTransformOptions]=\"hideTransformOptions\" \n                    [showTransitionOptions]=\"showTransitionOptions\" [hideTransitionOptions]=\"hideTransitionOptions\"></p-toastItem>\n        </div>\n    `,\n    animations: [\n        trigger('toastAnimation', [\n            transition(':enter, :leave', [\n                query('@*', animateChild())\n            ])\n        ])\n    ],\n    changeDetection: ChangeDetectionStrategy.Default\n})\nexport class Toast implements OnInit,AfterContentInit,OnDestroy {\n\n    @Input() key: string;\n\n    @Input() autoZIndex: boolean = true;\n    \n    @Input() baseZIndex: number = 0;\n\n    @Input() style: any;\n        \n    @Input() styleClass: string;\n\n    @Input() position: string = 'top-right';\n\n    @Input() modal: boolean;\n\n    @Input() preventOpenDuplicates: boolean = false;\n\n    @Input() preventDuplicates: boolean = false;\n    \n    @Input() showTransformOptions: string = 'translateY(100%)';\n\n    @Input() hideTransformOptions: string = 'translateY(-100%)';\n\n    @Input() showTransitionOptions: string = '300ms ease-out';\n\n    @Input() hideTransitionOptions: string = '250ms ease-in';\n\n    @Output() onClose: EventEmitter<any> = new EventEmitter();\n\n    @ViewChild('container') containerViewChild: ElementRef;\n\n    @ContentChildren(PrimeTemplate) templates: QueryList<any>;\n\n    messageSubscription: Subscription;\n\n    clearSubscription: Subscription;\n\n    messages: Message[];\n\n    messagesArchieve: Message[];\n\n    template: TemplateRef<any>;\n\n    mask: HTMLDivElement;\n    \n    constructor(public messageService: MessageService) {}\n\n    ngOnInit() {\n        this.messageSubscription = this.messageService.messageObserver.subscribe(messages => {\n            if (messages) {\n                if (messages instanceof Array) {\n                    const filteredMessages = messages.filter(m => this.canAdd(m));\n                    this.add(filteredMessages);\n                }\n                else if (this.canAdd(messages)) {\n                    this.add([messages]);\n                }\n\n                if (this.modal && this.messages && this.messages.length) {\n                    this.enableModality();\n                }\n            }\n        });\n\n        this.clearSubscription = this.messageService.clearObserver.subscribe(key => {\n            if (key) {\n                if (this.key === key) {\n                    this.messages = null;\n                }\n            }\n            else {\n                this.messages = null;\n            }\n\n            if (this.modal) {\n                this.disableModality();\n            }\n        });       \n    }\n\n    add(messages: Message[]): void {\n        this.messages = this.messages ? [...this.messages, ...messages] : [...messages];\n\n        if (this.preventDuplicates) {\n            this.messagesArchieve = this.messagesArchieve ? [...this.messagesArchieve, ...messages] : [...messages];\n        }\n    }\n\n    canAdd(message: Message): boolean {\n        let allow = this.key === message.key;\n\n        if (allow && this.preventOpenDuplicates) {\n            allow = !this.containsMessage(this.messages, message);\n        }\n\n        if (allow && this.preventDuplicates) {\n            allow = !this.containsMessage(this.messagesArchieve, message);\n        }\n\n        return allow;\n    }\n\n    containsMessage(collection: Message[], message: Message): boolean {\n        if (!collection) {\n            return false;\n        }\n\n        return collection.find(m => {\n           return (m.summary === message.summary && m.detail && message.detail && m.severity === message.severity);\n        }) != null;\n    }\n\n    ngAfterContentInit() {\n        this.templates.forEach((item) => {\n            switch(item.getType()) {\n                case 'message':\n                    this.template = item.template;\n                break;\n\n                default:\n                    this.template = item.template;\n                break;\n            }\n        });\n    }\n\n    onMessageClose(event) {\n        this.messages.splice(event.index, 1);\n\n        if (this.messages.length === 0) {\n            this.disableModality();\n        }\n\n        this.onClose.emit({\n            message: event.message\n        });\n    }\n\n    enableModality() {\n        if (!this.mask) {\n            this.mask = document.createElement('div');\n            this.mask.style.zIndex = String(parseInt(this.containerViewChild.nativeElement.style.zIndex) - 1);\n            let maskStyleClass = 'ui-widget-overlay ui-dialog-mask';\n            DomHandler.addMultipleClasses(this.mask, maskStyleClass);\n            document.body.appendChild(this.mask);\n        }\n    }\n    \n    disableModality() {\n        if (this.mask) {\n            document.body.removeChild(this.mask);\n            this.mask = null;\n        }\n    }\n\n    onAnimationStart(event: AnimationEvent) {\n        if (event.fromState === 'void' && this.autoZIndex) {\n            this.containerViewChild.nativeElement.style.zIndex = String(this.baseZIndex + (++DomHandler.zindex));\n        }\n    }\n\n    ngOnDestroy() {        \n        if (this.messageSubscription) {\n            this.messageSubscription.unsubscribe();\n        }\n        \n        if (this.clearSubscription) {\n            this.clearSubscription.unsubscribe();\n        }\n\n        this.disableModality();\n    }\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [Toast,SharedModule],\n    declarations: [Toast,ToastItem]\n})\nexport class ToastModule { }\n"]}